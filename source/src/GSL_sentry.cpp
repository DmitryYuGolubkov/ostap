// $Id$
// ============================================================================
// Include files 
// ============================================================================
// STD & STL 
// ============================================================================
#include <iostream>
// ============================================================================
// local
// ============================================================================
#include "GSL_sentry.h"
// ============================================================================
/** @file 
 *  Implementation file for class Ostap::Math::GSL::GSL_Error_Handler
 *  
 *  @see Ostap::Math::GSL::GSL_Error_Handler
 *  @date 2012-05-27 
 *  @author Vanya Belyaev Ivan.Belyaev@itep.ru
 *
 *                    $Revision$
 *  Last modification $Date$
 *                 by $Author$
 */
// ============================================================================
namespace
{
  // ==========================================================================
  // GSL 
  // ==========================================================================
  void GSL_local_error
  ( const char * reason    ,
    const char * file      ,
    int          line      ,
    int          gsl_errno ) 
  {
    std::cerr 
      << " GSL_ERROR : "   
      << gsl_errno << "/'" << gsl_strerror ( gsl_errno ) << "'"
      << "\t reason '"     
      << reason    << "' "
      << "\t file/line '"  
      << file      << "'/" << line 
      << std::endl ;  
  }
  // ==========================================================================
}
// ============================================================================
// constructor: loc
// ============================================================================
Ostap::Math::GSL::GSL_Error_Handler::GSL_Error_Handler () 
  : m_old ( 0 ) 
{ 
  m_old = gsl_set_error_handler ( &GSL_local_error ) ; 
  // m_old = gsl_set_error_handler_off () ; 
}
// ============================================================================
// destructor/ unlock 
// ============================================================================
Ostap::Math::GSL::GSL_Error_Handler::~GSL_Error_Handler () 
{ gsl_set_error_handler ( m_old ) ; }


// ============================================================================
// The END 
// ============================================================================
